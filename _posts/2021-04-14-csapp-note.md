---
title: 深入理解计算机系统笔记
date: 2021-04-14 22:00:33 +0800
categories: [基础技术]
tags: [技术]
pin: true
author: Tang Jiahua

toc: true
comments: true
Typora-root-url: ..
math: false
mermaid: true
---

# 第1章：计算机系统漫游

## 程序的编译方式

- 汇编阶段：汇编器将hello.s翻译成机器语言指令，把这些指令打包成一种叫做可重定位目标程序的格式，并将结果保存在目标文件hello.o中。hello.o是一个二进制文件，它包含的17个字节是函数main的指令编码。
- 链接阶段：printf函数存在于一个名为printf.o的单独的预编译好了的目标文件中，而这个文件必须以某种方式合并到我们的hello.o程序中。链接器（ld）就负责处理这种合并。结果就得到hello文件，它是一个可执行的目标文件（或者简称为可执行文件），可以被加载到内存中，由系统执行。

## 处理器读并解释存储在内存中的指令

shell是一个命令解释器，它输出一个提示符，等待输入一个命令行，然后执行这个命令。如果该命令行的第一个单词不是一个内置的shell命令，那么shel就会假设这是一个可执行文件的名字。



我们将处理器的指令集架构和处理器的微体系结构区分开来：指令集架构描述的是每条机器代码指令的效果；而微体系结构描述的是处理器实际上是如何实现的。

## 高速缓存至关重要

高速缓存存储器简称为cache，作为暂时的集结区域，存放处理器近期可能会需要的信息。高速缓存是用一种叫做静态随机访问存储器（SRAM）的硬件技术实现的。利用高速缓存的局部性原理。

文件是对IO设备的抽象表示，虚拟内存是对主存和磁盘IO设备的抽象表示，进程则是对处理器、主存和IO设备的抽象表示。

*20世纪80年代中期，Unix厂商试图通过加入新的、往往不兼容的特性来使它们的程序与众不同，麻烦也随之而来了。为了阻止这种趋势，IEEE开始努力标准化Unix的开发，后来被命名为Posix。结果就得到了一系列的标准，称作Posix标准。*

## 一些重要的主题

**超线程**：有时也被称为同时多线程，是一项允许一个CPU执行多个控制流的技术。它涉及CPU某些硬件有多个备份，比如程序计数器和寄存器文件，而其他的硬件部分只有一份，比如执行浮点算术运算的单元。举例来说，i7处理器可以让每个核执行两个线程，所以一个4核的系统实际上可以并行地执行8个线程。

**超标量**：如果处理器可以达到一个周期一条指令更快的执行速率，就称之为超标量处理器。

# 第2章：信息的表示和处理

## 信息存储

C编译器还把每个指针和类型信息联系在一起，这样就可以根据指针值的类型，生成不同的机器级代码来访问存储在指针所指向位置处的值。尽管C编译器维护着这个类型信息，但是它生成的实际机器级程序并不包含关于数据类型的信息。



ISO C99引入了一类数据类型，其数据大小是固定的，不随编译器和机器设置而变化。其中就有数据类型int32_t和int64_t，它们分别是4个字节和8个字节。使用确定大小的整数类型是程序员准确控制数据表示的最佳途径。



```c++
// 下面的声明都是同一个意思
unsigned long
unsigned long int
long unsigned
long unsigned int
```



**字节大端小端方案或者说顺序会影响的情况：**

1. 网络传输过程中，大端机器和小端机器传送的时候字节会反序。
2. 汇编代码中的数值表示
3. 强制类型转换的时候



&符号是创建一个指针，指针包括地址信息还有类型信息。而强制类型转换不会改变真实的指针，它们只是告诉编译器以新的数据类型来看待被指向的数据。



布尔环：(a^b)^a=b就是布尔环，可以产生一些有意思的数学问题

位向量：a=[01101001]表示集合A={0,3,5,6}，而位向量的应用之一就是集合->压缩？

移位运算：算术右移看开头，逻辑右移不看开头。机器基本都是逻辑右移。当移动k位的k过大的时候，需要对其取模，模“最大位数”。



**关于数据类型转换，如补码反码等等、浮点数、定点数的知识都直接看书吧，这里整理起来太麻烦了～**



