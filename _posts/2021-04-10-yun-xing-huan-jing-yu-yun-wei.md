---
title: 第九课：运行环境与运维
date: 2021-04-10 16:50:00 +0800
categories: [腾讯游戏学院]
tags: [技术]
pin: true
author: Tang Jiahua

toc: true
comments: true
Typora-root-url: ..
math: false
mermaid: true
---

# 运行环境

运行环境，指一种把变异好的程序在目标机器上运行的后台环境。是软件运行所要求的各种条件，包括软硬件环境。

# 物理部署

问题：假如某款产品同时在线1000W，需要多少台机器？

- 估算步骤
  - 预估用户数量：总注册数，并发读写量，同时在线数量
  - 压力测试，得出单机承载数量
  - 备份、容灾处理

**总的机器数量=接入层机器数量+逻辑层机器数量（同时在线数量/单机承载数量）+DB层机器数量+备份机器数量**

# 系统的可运维性

- 确保系统的正常运行状态
  - 灰度
  - 负载均衡
- 排除系统的异常运行状态
  - 日志：日志是否完善很重要，通过茶日志做好监控，比如MMORPG是很重要的！比较复杂的交易系统。
  - 监控
  - 告警
- 应对突发的运行需求
  - 过载保护
  - 动态扩容：逻辑层稍微轻松，DB层比较麻烦，需要确保数据的一致性
  - 容灾：双主、主备

# 运维案例分析

略